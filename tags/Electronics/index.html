<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Butty Builds</title>
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

</head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/header.jpg)">
        <div class='av-pic' style="background-image: url(/assets/gremlin.jpg)">
        </div>
    </section>
    <section class='menu'>
        <div>Butty Builds</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/logbooks/" class="Btn">
              <li>Logbooks</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
    <header class='PageTitle'>
        <h1>{ Electronics }</h1>
    </header>
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/05/06/RFID-Sensor-Project-Part-3-Assembly/">RFID Sensor Project Part 3: Assembly</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-05-06T12:18:39.000Z" itemprop="datePublished">
    2021-05-06
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Soldering/">Soldering</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <p>Unfortunately content is missing :(</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/05/04/Finding-Fiegenbaum-s-First-Constant/">Finding Fiegenbaum&#39;s First Constant</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-05-04T13:38:11.000Z" itemprop="datePublished">
    2021-05-04
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Physics/">Physics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Experiment/">Experiment</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <p>Unfortunately content is missing :(</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/03/11/RFID-Sensor-Project-Part-2-PCB-Design/">RFID Sensor Project Part 2 - PCB Design</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-03-11T12:14:00.000Z" itemprop="datePublished">
    2021-03-11
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/PCB-Design/">PCB Design</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <h3 id="Circuit-Diagram"><a href="#Circuit-Diagram" class="headerlink" title="Circuit Diagram"></a>Circuit Diagram</h3><p>As the majority of the ciruit was designed previously in spice, the Eagle schematic for this file was proivided with those sections filled in. The rest of the file was filled in by importing sympol parts, and setting the model and package.<br><img src="/images/rfid2/RFID18.png" alt="RFID schematic" style="width: 100%; height: 100%" class="center"></p>
<h3 id="PCB-Outline"><a href="#PCB-Outline" class="headerlink" title="PCB Outline"></a>PCB Outline</h3><p>I then created a corresponding board file to the the schematic, and was presented by the following screen.</p>
<p style="text-align:center;"><img src="/images/rfid2/RFID19.png" alt="Board outline" style="width: 75%; height: 75%">

</p><p>As we had been provided by the outline of a box that the PCB was to fit in, I modified the shape of the PCB to fit within it. To maximise the space available I made cut outs for the areas where the screw connections of the case will be. I then removed the deadspace under where the buttons will be. Finally, I rounded off the corners so the board is comfortable to pick up and work on once it has been fabricated.</p>
<p style="text-align:center;"><img src="/images/rfid2/RFID20.png" alt="Board outline" style="width: 75%; height: 75%">

</p><h3 id="Part-Placement"><a href="#Part-Placement" class="headerlink" title="Part Placement"></a>Part Placement</h3><p>The first step in designing the board layout was to decide where the major components (i/o and ICs) were going to be placed. With this decided the remaining area would dictate where the passive components and the print inductor were to be placed. To ease in placing the passive components I lined them around the board edge, woughly in the order they were to be connected.</p>
<p style="text-align:center;"><img src="/images/rfid2/RFID21.png" alt="Part placement" style="width: 75%; height: 75%">

</p><p>Once I had finalised the position of the major components, the next step was to place the passive components. I did this in such a way as to minimise the routing needed between them. In this design I also took care to seperate the digital and analogue sections of the design.  </p>
<p style="text-align:center;"><img src="/images/rfid2/RFID22.png" alt="Part placement" style="width: 75%; height: 75%">

</p><h3 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h3><p>When routing, I started by connecting all the data (signal) lines. These were connected with 10 mil traces and were relatively simple to connect as the traces were usually short owing to the components being placed together in the design. </p>
<p style="text-align:center;"><img src="/images/rfid2/RFID23.png" alt="Routing" style="width: 75%; height: 75%">

</p><p>The next step was then to connect the power lines. Not all the power lines needed connecting as the design was going to utilise ground and power planes. However, in connecting seperated sections of the design, such as power connections on the wrong side of the board, vias and 20 mil traces were used.</p>
<p style="text-align:center;"><img src="/images/rfid2/RFID24.png" alt="Routing" style="width: 75%; height: 75%">

</p><h3 id="Print-Inductor"><a href="#Print-Inductor" class="headerlink" title="Print Inductor"></a>Print Inductor</h3><p>By this point most of the design had been completed the final part of placement and routing was to create a print inductor. To do this I added a new package in the parts library, and used the ULP tool to create a print inductor. I then duplicated the inductor and flipped it to the base plate to create a two layer inductor. I connected these with a via to create a finished package. Once I had the package I asssigned the connection points of my design and it was reasy.<br><img src="/images/rfid2/RFID25.png" alt="Inductor" style="width: 50%; height: 50%"><img src="/images/rfid2/RFID26.png" alt="Inductor" style="width: 50%; height: 50%"></p>
<p>I placed it on the board in the area that I had left for it.</p>
<p style="text-align:center;"><img src="/images/rfid2/RFID27.png" alt="Board outline" style="width: 75%; height: 75%">

</p><h3 id="Ground-amp-Power-Planes"><a href="#Ground-amp-Power-Planes" class="headerlink" title="Ground &amp; Power Planes"></a>Ground &amp; Power Planes</h3><p>Once I had connected the components I then had to create base and power planes. To do this I created a polygon, and selected ratsnest to connect the planes to the rest of the circuit.<br><img src="/images/rfid2/RFID28.png" alt="Power plane" style="width: 50%; height: 50%"><img src="/images/rfid2/RFID29.png" alt="Power Plane" style="width: 50%; height: 50%"></p>
<h3 id="Silkscreen"><a href="#Silkscreen" class="headerlink" title="Silkscreen"></a>Silkscreen</h3><p>At this stage I added my name and information to the board design, tidied the labels for components up, and decided on any images I wanted to include.</p>
<p>For my silkscreen I wanted a picture of the print inductor, If the board were lacking a case I feel this would be a usefyl feature for the user as it would give a visual idea of where to scan. To do this I went back to the package library and used the ULP tools to export the print as a bitmap. I then imported the bitmap on the board file and laid the image over the top of the Inductor.<br><img src="/images/rfid2/RFID30.png" alt="Silkscreen" style="width: 50%; height: 50%"><img src="/images/rfid2/RFID31.bmp" alt="Silkscreen" style="width: 50%; height: 50%"></p>
<h3 id="Final-Product"><a href="#Final-Product" class="headerlink" title="Final Product"></a>Final Product</h3><p>Finally, a design rule check was run to ensure that the design conformed to the fabrication house’s capabilities. Although a few errors were found, these were expected owing to how the print inductor was created. This is now the completed board ready for fabrication, this was finally exported as a gerber file and submitted for production.<br><img src="/images/rfid2/RFID33.png" alt="Final DRC" style="width: 50%; height: 50%"><img src="/images/rfid2/RFID34.png" alt="Finished Board" style="width: 50%; height: 50%"></p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2021/02/11/RFID-Sensor-Project-Part-1-Analogue-Simulation/">RFID Sensor Project Part 1 - Analogue Simulation</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-02-11T11:56:00.000Z" itemprop="datePublished">
    2021-02-11
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Circuit-Simulation/">Circuit Simulation</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <h3 id="LCR-Circuit"><a href="#LCR-Circuit" class="headerlink" title="LCR Circuit"></a>LCR Circuit</h3><p>I first created my LCR circuit using modelsim. This required placing basic components and connecting them with wires.</p>
<p style="text-align:center;"><img src="/images/rfid1/RFID1.png" alt="LCR circuit" style="width: 33%; height: 33%">

</p><p>I then performed an AC analysis to determine the 3dB point of this bandpass filter. I found the 3dB to be 195KHz.<br><img src="/images/rfid1/RFID2.png" alt="AC sweep" style="width: 100%; height: 100%"></p>
<p>I then changed the source type to a pulse. This allowed me to perform a transient analysis of the band pass filter.</p>
<p style="text-align:center;"><img src="/images/rfid1/RFID3.png" alt="LCR circuit" style="width: 33%; height: 33%">

</p><p>I found that the response would fluctuate.<br><img src="/images/rfid1/RFID4.png" alt="Transient responce" style="width: 50%; height: 50%"><img src="/images/rfid1/RFID5.png" alt="Transient responce" style="width: 50%; height: 50%"></p>
<p>I then increased the frequency to 125KHz. I found that the response stabilised and that it rapidly decayed.<br><img src="/images/rfid1/RFID6.png" alt="Transient responce" style="width: 50%; height: 50%"><img src="/images/rfid1/RFID7.png" alt="Transient responce" style="width: 50%; height: 50%"></p>
<p>However, this simulation is not a realistic case for a digital microcontroller pin which has an output impedance of around 50Ω. </p>
<p style="text-align:center;"><img src="/images/rfid1/RFID8.png" alt="LCR Circuit" style="width: 33%; height: 33%">

</p><p>Modifying the circuit to include the 50Ω impedance I that the response decayed much more rapidly.<br><img src="/images/rfid1/RFID9.png" alt="Transient responce" style="width: 50%; height: 50%"><img src="/images/rfid1/RFID10.png" alt="Transient responce" style="width: 50%; height: 50%"></p>
<h3 id="AM-Demodulator"><a href="#AM-Demodulator" class="headerlink" title="AM Demodulator"></a>AM Demodulator</h3><p>Creating the AM demodulator I was able to perform both AC and transient analysis on each of the “wires”.</p>
<p style="text-align:center;"><img src="/images/rfid1/RFID11.png" alt="AM Demodulator" style="width: 33%; height: 33%">

</p><p>I found that the output removes the information signal from the carrier frequency. It tended towards an attenuation of -50 dB.<br><img src="/images/rfid1/RFID12.png" alt="AC sweep" style="width: 100%; height: 100%"><br><img src="/images/rfid1/RFID13.png" alt="Transient responce" style="width: 50%; height: 50%"><img src="/images/rfid1/RFID14.png" alt="Transient responce" style="width: 50%; height: 50%"></p>
<h3 id="MFB-Active-Low-Pass-Filter"><a href="#MFB-Active-Low-Pass-Filter" class="headerlink" title="MFB Active Low Pass Filter"></a>MFB Active Low Pass Filter</h3><p style="text-align:center;"><img src="/images/rfid1/RFID15.png" alt="MFB filter" style="width: 75%; height: 75%">

</p><p>The active filter has a gain of 50dB. Its 3dB point is 45KHz.<br><img src="/images/rfid1/RFID16.png" alt="AC sweep" style="width: 100%; height: 100%"></p>
<p>The transient response of the circuit shows that there is a small delay between the input and the output response, this is due to the slew rate of the op-amp used.<br><img src="/images/rfid1/RFID17.png" alt="Transient responce" style="width: 100%; height: 100%"></p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/12/01/Traffic-Light-State-Machine/">Traffic Light State Machine</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-12-01T20:35:34.000Z" itemprop="datePublished">
    2020-12-01
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/State-Machines/">State Machines</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <p>Unfortunately content is missing :(</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/03/11/g-by-Freefall-Timer/">g by Freefall Timer</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-03-11T14:20:00.000Z" itemprop="datePublished">
    2020-03-11
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Subsystem-Design/">Subsystem Design</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Physics/">Physics</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <p>Unfortunately content is missing :(</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/12/19/DAC-Design-Project/">DAC Design Project</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-12-19T09:42:00.000Z" itemprop="datePublished">
    2019-12-19
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>As part of my A-Level Electronics we have had to cover a lot of systems with operational amplifiers, at times it has been more like A-Level Op-Amps. One particular circuit that we have had to cover is the digital to analogue converter. I have found the ADC and DAC interesting; these are particularly important circuits as in an increasingly digital age it has only become more important to be able to interact between the digital world of computers and the analogue world around us. </p>
<p>When learning about the circuit we were shown a demonstration circuit. Although the circuit was sufficient in showing how the process would work, it was not well designed as the steps were inconsistent and there was significant noice. I felt that I could design and construct a better circuit.<br><img src="/images/dac/DAC6.jpg" alt="Demo circuit" style="width: 50%; height: 50%"><img src="/images/dac/DAC12.jpg" alt="Demo results" style="width: 50%; height: 50%"></p>
<h3 id="Circuit-Design"><a href="#Circuit-Design" class="headerlink" title="Circuit Design"></a>Circuit Design</h3><p>My main concern when designing this circuit was to ensure that there was even spacing between the output steps. To this I ensured that each input was a bigger than the last by a multiple of two. To ensure these steps using the resistors I had to hand, mostly E24 series resistors, I had to use multiple resistors to create a combined resistance. I combined resistors in series as it was easier to calculate, neater to diagram, and easier to breadboard.<br><img src="/images/dac/DAC13.png" alt="Circuit Diagram" style="width: 100%; height: 100%"></p>
<p>Although not drawn in the circuit diagram, I replicated the 8 bit counter made from a CMOS 4060 and an RC filter. This was to create the binary counter used as the input to the DAC.</p>
<h3 id="Circuit-Building"><a href="#Circuit-Building" class="headerlink" title="Circuit Building"></a>Circuit Building</h3><p>Building the circut I generally followed the layout of the the demonstration. I made sure to keep my wiring neat and trimmed my resistors to make sure they were not touching.<br><img src="/images/dac/DAC3.jpg" alt="Circuit building" style="width: 50%; height: 50%"><img src="/images/dac/DAC5.jpg" alt="Circuit building" style="width: 50%; height: 50%"><br><img src="/images/dac/DAC9.jpg" alt="Circuit building" style="width: 50%; height: 50%"><img src="/images/dac/DAC11.jpg" alt="Circuit building" style="width: 50%; height: 50%"></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>I was pleased to see that the steps on the output were roughly consistent, more so than the demonstration circuit. Although the noice on the output compared to the demonstration circuit, I would still say that this was an issue that needed addressing. Overall, I was pleased with this circuit, I feel that there is plenty to explore with both ADCs and DACs, these are topics I may come back to in the future.</p>
<p>Unfortunately, at the time of writing I cannot find the image of the results to my project, I suspect it lost to a disposable USB. </p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/11/22/Investigation-of-Charging-and-Discharging-Capacitors/">Investigation of Charging and Discharging Capacitors</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-11-22T14:29:32.000Z" itemprop="datePublished">
    2019-11-22
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Physics/">Physics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Experiment/">Experiment</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <p>Unfortunately content is missing :(</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/10/24/Fizzbuzz-on-Arduino/">Fizzbuzz on Arduino</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-10-24T11:56:00.000Z" itemprop="datePublished">
    2019-10-24
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Arduino/">Arduino</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/C-Programming/">C++ Programming</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Microcontroller/">Microcontroller</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Inspired by Tom Scott’s YouTube Video on the <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=QPZ0pIK_wsc&list=PL5ZXG50fTM7oZBZmFhJygA2419Hsg6v8H">FizzBuzz interview question</a> for programmers, which was proposed by the <a target="_blank" rel="noopener" href="https://imranontech.com/2007/01/24/using-fizzbuzz-to-find-developers-who-grok-coding/">‘Imran on Tech’ blog</a>. For this project, I used the Arduino IDE again, using an Arduino Nano and a 10 segment LED display as a physical solution to Imran’s interview question. The project helped to consolidate my programme planning and Arduino coding skills that I learned during my EPQ.</p>
<h3 id="The-Hardware"><a href="#The-Hardware" class="headerlink" title="The Hardware"></a>The Hardware</h3><p>As I was planning on using an Arduino for my solution to the Fizzbuzz game I needed to create a circuit to surport it. As an input it had a button, and a low pass filter for debouncing, connected to a digital pin. As an output it had an LED display connected to digital pins in parrallel. The powerrails were poweered from the power and ground pins.</p>
<p style="text-align:center;"><img src="/images/fizzbuzz/Fizzbuzz2.jpg" alt="Arduino board" style="width: 33%; height: 33%">

</p><h3 id="The-Program"><a href="#The-Program" class="headerlink" title="The Program"></a>The Program</h3><p>In the main loop my program would constantly poll the input pin. Once the button had been pressed it would then increase the count, and loop back to 0 if it reached 100. Then the output would check if the count was a multiple of fizz or buzz and then output the flag. If it was neither then the value would be outputted as a 7 bit binary number. I decided to output it as flags and binary as these would be the most useful way to interact with larger systems if required.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;                                  <span class="comment">//Defining Variables</span></span><br><span class="line"><span class="keyword">int</span> buttonState = <span class="number">0</span>;                            <span class="comment">//Defining buttonState as low</span></span><br><span class="line"><span class="keyword">int</span> ouMin = <span class="number">3</span>, ouMax = <span class="number">12</span>;                      <span class="comment">//Lowest &amp; highest output pin</span></span><br><span class="line"><span class="keyword">int</span> fizz_val = <span class="number">3</span>, buzz_val = <span class="number">5</span>;                 <span class="comment">//Defining values for fizz &amp; buzz</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Buzz = <span class="number">11</span>, Fizz = <span class="number">12</span>, buttonPin = <span class="number">13</span>; <span class="comment">//Setting i/o pins</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">    pinMode(buttonPin, INPUT);           <span class="comment">//Set button as input</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = ouMin; i &lt;= ouMax; i++) <span class="comment">//Setting output pins</span></span><br><span class="line">    &#123;</span><br><span class="line">        pinMode(i, OUTPUT);</span><br><span class="line">    &#125;</span><br><span class="line">    Serial.begin(<span class="number">9600</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">    buttonState = digitalRead(buttonPin); <span class="comment">//Read the state of the button value</span></span><br><span class="line">    <span class="keyword">if</span> (buttonState == HIGH)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Check if the button is pressed</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ouMin; i &lt;= ouMax; i++) <span class="comment">//If so reset all output pins to 0</span></span><br><span class="line">        &#123;</span><br><span class="line">            digitalWrite(i, LOW);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//increment count</span></span><br><span class="line">        count++;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Reset count when it exceeds 100</span></span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">100</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Check if value is a multiple of fizz</span></span><br><span class="line">    <span class="keyword">if</span> (count % fizz_val == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        digitalWrite(Fizz, HIGH);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Check if value is a multiple of buzz</span></span><br><span class="line">    <span class="keyword">if</span> (count % buzz_val == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        digitalWrite(Buzz, HIGH);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//check if it is neither a multiple of fizz or buzz</span></span><br><span class="line">    <span class="keyword">if</span> (!((count % fizz_val == <span class="number">0</span>) || (count % buzz_val == <span class="number">0</span>)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> out = count; <span class="comment">//Set local out equal to global count</span></span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//convert to binary</span></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">6</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (out &gt;= <span class="built_in">pow</span>(<span class="number">2</span>, j))</span><br><span class="line">            &#123;</span><br><span class="line">                digitalWrite(j + <span class="number">3</span>, HIGH);</span><br><span class="line">                out -= <span class="built_in">pow</span>(<span class="number">2</span>, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    delay(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h3><p>Overall I was pleased with the results of this project, the program worked and the hardware was enough to be able to interpret what was happening. </p>
<p>If I were to improve the hardware I would use multiplexed seven segment displays so the output could be more easily understand. If I were to improve the program I would improve the scalability of the code so that it could be used for a larger set of values.</p>
<p style="text-align:center;"><video style="width: 33%; height: 33%" autoplay muted>
  <source src="/images/fizzbuzz/Fizzbuzz.mp4" type="video/mp4">
This browser does not support the video tag.
</video></p>
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/06/13/Lottery-Number-Generator-PIC16F88/">Lottery Number Generator - PIC16F88</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-06-13T01:07:00.000Z" itemprop="datePublished">
    2019-06-13
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Electronics/">Electronics</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Microcontroller/">Microcontroller</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Assembler/">Assembler</a> }
  </li>


  </ul>
  
  
</div>

    </header>
    <div>
      
        <h3 id="Design-Brief"><a href="#Design-Brief" class="headerlink" title="Design Brief"></a>Design Brief</h3><p>The lottery is a part of weekly life in the UK, for many. Adults will often buy tickets hoping to win the jackpot, or simply for the fun of playing. As every number is just as likely as each other, unless you play with lucky pick numbers or personal numbers in mind, it can be hard to choose your numbers. Especially if you wish to use different numbers every week. This product shall generate numbers for the UK lottery, to pick the numbers for people.</p>
<h3 id="Specification"><a href="#Specification" class="headerlink" title="Specification"></a>Specification</h3><p>⦁    It must run off of a 5V supply.<br>⦁    It must have a button when pressed and released generates a number.<br>⦁    The random numbers generated must be between 1 and 59.<br>⦁    Must display in alphanumeric decimal.<br>⦁    It should display 2 digits.<br>⦁    It must output a desired number 98% of the time.<br>⦁    It must generate and display the numbers in under 5 milliseconds.</p>
<h3 id="Inputs-amp-Outputs"><a href="#Inputs-amp-Outputs" class="headerlink" title="Inputs &amp; Outputs"></a>Inputs &amp; Outputs</h3><p>Schmitt NOT Gate (40106B)<br>Pin    Connection    Pin    Connection<br>1        VDD    Connect High<br>2        13<br>3        12<br>4        11<br>5    Connection from PTM switch    10<br>6    Connection to PIC Input    9<br>GND    Connect Low    8    </p>
<p>PIC16F88<br>Pin    Code    Connection    Pin    Code    Connection<br>1    A2        18    A1<br>2    A3        17    A0    Input (from Schmitt Inverter)<br>3    A4        16    A7<br>4    A5        15    A6<br>5    GND    Connect Low    14    VDD    Connect High<br>6    B0    Units BCD A    13    B7<br>7    B1    Units BCD A    12    B6<br>8    B2    Units BCD A    11    B5<br>9    B3    Units BCD B    10    B4    </p>
<p>BCD Decoder Driver (4511B)<br>Pin    Connection    Pin    Connection<br>1    BCD B    VDD    Connect High<br>2    BCD C    15    Segment F<br>3    Connect Low (lamp test)    14    Segment G<br>4    Connect High (ripple blanking)    13    Segment A<br>5    Connect Low (enable/store input)    12    Segment B<br>6    BCD D    11    Segment C<br>7    BCD A    10    Segment D<br>GND    Connect Low    9    Segment E</p>
<h3 id="Circuit-Diagram"><a href="#Circuit-Diagram" class="headerlink" title="Circuit Diagram"></a>Circuit Diagram</h3><h3 id="Flow-Chart"><a href="#Flow-Chart" class="headerlink" title="Flow Chart"></a>Flow Chart</h3><h3 id="Program"><a href="#Program" class="headerlink" title="Program"></a>Program</h3><p>A copy of program version “0700t” &amp; “0700u” attached to the post. When initially coding my project I ran into the problem of it not correctly compiling, upon inspecting my code I found all my instances of “MOVLW” to be “MOVW” this is not a recognised bit of code as it as is not specify a target byte to move to the working register. I remedied this problem by using Notepad++’s find and replace function to correct every instance of this problem.</p>
<p>Another change I made whilst writing my code was to the display section. When I first wrote it I used “BTFSC” and “BSF” commands to transfer the information from the clock register to PORTB. I then found out you can write to PORTB in the same way as any other directory. This allowed me to simplify a section of clumsy and repetitive code to a simpler and  much more elegant solution.  My new code used “MOVF” and “MOVWF” to simply transfer the data in the clock register to the output register of PORTB.</p>
<h3 id="Evidence-of-Building"><a href="#Evidence-of-Building" class="headerlink" title="Evidence of Building"></a>Evidence of Building</h3><p>I started the building of my circuit by placing all the parts that I thought would go over the trench, this allows me to set up an efficient placement for wiring, this is particularly evident in that the “units” BCD decoder driver is underneath the the dual seven segment display so that output C directly lines up with its pin on the display. </p>
<p>I then proceeded to wire the chips, inputs and outputs together. All the wires connecting to positive and negative pins with red and black wire respectively. I used green wire for all the data on the breadboard. I started with the switches to the PIC, then the PIC to the BCD decoder drivers, and finally the BCD decoder drivers to the dual seven segment display.</p>
<p>Whilst testing the circuit I added a Schmitt NOT gate, this is why it is not connected particularly neatly. I used the Schmitt NOT gate to debounce the button input  to the PIC, this was done in an attempt to fix one of the bugs found. Although it was unsuccessful at fixing the bug I kept it in the circuit as I feel it will help the stability of my program.</p>
<h3 id="Evidence-of-Testing"><a href="#Evidence-of-Testing" class="headerlink" title="Evidence of Testing"></a>Evidence of Testing</h3><p>I first tested my program to make sure that the code was working as desired. I did this by using the integrated testing systems on the PIC loading board. By using the buttons and LEDs I could see if any incorrect BCD signals were being sent. I did not find any numbers on either chips that were outside the desired range.</p>
<p>To make sure that the lottery number generator worked I connected the breadboards to 5V and 0V. This showed that it was working as intended. After testing a few random numbers I concluded that there was an error in the wiring of the display. After looking back over the pinout information I found and corrected the error. This meant that all the device was working as intended.</p>
<h3 id="Photo-of-Working-circuit"><a href="#Photo-of-Working-circuit" class="headerlink" title="Photo of Working circuit"></a>Photo of Working circuit</h3><p>Finally I neatened the connections on the board, making everything sit flush on breadboard whilst making sure it all stays working. This makes circuit easier to follow and reduces any stray capacitance in the circuit.</p>
<p>⦁    Testing against specification<br>⦁    It must run off of a 5V supply.<br>⦁    Both the testing board and the final circuit ran off of a 5V supply. I specifically chose 4511s as my BCD decoder driver as they are designed to run off of 5V. The only change I made was adding a capacitor over the power rails as this smoothed any fluctuations in the supply voltage, this was needed as the PIC was especially finicky with its input voltages.<br>⦁    It must have a button when pressed and released generates a number.<br>⦁    The sole input for the device is a button, this needs to be pressed and released for a new number to be generated. This feature was especially coded into my project. Once the button had been pressed the PIC would be stuck in a looping of code until it was released again.</p>
<p>⦁    The random numbers generated must be between 1 and 59.<br>⦁    The numbers generated are between the values 0 and 59. This includes every number that it is supposed to have but has a very small chance of displaying zero. I have literally met the needs of the specification. However, I feel that it is implicit that it doesn’t want any numbers but these, so I am not particularly happy about this<br>⦁    Must display in alphanumeric decimal.<br>⦁    I have used two BCD decoder drivers and a dual seven segment display to turn the output of the output to the PIC into a way that can easily be understood visually.<br>⦁    It should display 2 digits.<br>⦁    By using a dual seven segment display I have limited myself into only being able to display 2 digits, meeting the specification.<br>⦁    It must output a desired number 98% of the time.<br>⦁    To test to see if it was generating a desired number a sufficient amount of the time, I used my generator 200 times and recorded the frequency of every number generated. The number 0 was generated twice giving it a 1% chance of being generated. I see no significant evidence to say that 0 has a different probability of being generated. Giving it a 1.7% chance. This means it generates a desired number 98.3% of the time, meeting the specification.<br>⦁    It must generate and display the numbers in under 5 milliseconds.<br>⦁    The clock speed of the PIC16F88 is 38 KHz. Between the button being released and the clock moving to the output register there is a maximum of 7 lines of code. This means the maximum delay is 0.74 ms, well below the specified 5 ms.</p>
<h3 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h3><p>During this project, I have learnt a great deal about assembly code and microcontrollers in general. This has been a particularly interesting project as I have had no prior experience with these systems, and would be interested to see what I can do with them in the future. If I were to do another project with them I would try using a larger number of Inputs as I feel that processing this information would play to the advantage of micro-controlled systems more than conventional circuits.</p>
<p>I have noticed that my generator also generates the number 00 as well as 01-59. It is my belief that this error is to do with the code. I feel that with an alternative approach to the code that this problem can be remedied. This is likely to need a complete overhaul of the code, but I would say that this is definitely worth it. This would improve the percentage of desired outputs drastically, this would more wholefully meet the specification.</p>
<p>To improve the design of this project, I would reduce the number of PICs to one. This would make a much more efficient design as it is much less wasteful. This would likely make removing 00 as an output easier as it would mean that the two PICs would not have to communicate. If this was made as a commercial project this would drastically reduce the overall cost of the circuit, as PICs are expensive. </p>
<p>Overall I would say that this circuit was effective as it met every part of the specification. However, I would also call it inefficient as it was wasteful in its resources and the end result was underwhelming. Although I am pleased that I underwent this project I am not displeased with the result. I feel that I may have started this over ambitious and I have definitely learnt a lesson in setting realistic goals.</p>

      
    </div>
</article>

    </li>
  
</ul>

  <section id="nav-wrapper">
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/tags/Electronics/page/2/">2</a><a class="extend next" rel="next" href="/tags/Electronics/page/2/">next »</a>
    </nav>
  </section>



            <footer>
    <div>© 2021 - Joseph Butterworth </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>